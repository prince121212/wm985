# æ–‡æ˜èµ„æºç«™ (Civilization Resources Platform)

ä¸€ä¸ªç°ä»£åŒ–çš„èµ„æºåˆ†äº«å¹³å°ï¼ŒåŸºäº Next.js 14ã€TypeScript å’Œ Tailwind CSS æ„å»ºã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ ã€ä¸‹è½½ã€æ”¶è—å’Œè¯„ä»·å„ç§ç±»å‹çš„æ•°å­—èµ„æºã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **èµ„æºç®¡ç†** - ä¸Šä¼ ã€ä¸‹è½½ã€åˆ†ç±»ç®¡ç†å„ç§æ•°å­—èµ„æº
- **ç”¨æˆ·ç³»ç»Ÿ** - å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¸­å¿ƒåŠŸèƒ½
- **æœç´¢ç­›é€‰** - å¼ºå¤§çš„èµ„æºæœç´¢å’Œå¤šç»´åº¦ç­›é€‰åŠŸèƒ½
- **è¯„ä»·ç³»ç»Ÿ** - èµ„æºè¯„åˆ†ã€è¯„è®ºã€æ”¶è—åŠŸèƒ½
- **åˆ†ç±»æ ‡ç­¾** - çµæ´»çš„åˆ†ç±»ä½“ç³»å’Œæ ‡ç­¾ç³»ç»Ÿ

### ğŸ›  æŠ€æœ¯ç‰¹æ€§
- ğŸš€ **Next.js 14** - ä½¿ç”¨æœ€æ–°çš„ App Router
- ğŸ¨ **Tailwind CSS** - ç°ä»£åŒ–çš„æ ·å¼ç³»ç»Ÿ
- ğŸ” **NextAuth.js** - å®Œæ•´çš„èº«ä»½è®¤è¯ç³»ç»Ÿ
- ğŸ’¾ **SQLite/PostgreSQL** - çµæ´»çš„æ•°æ®åº“æ”¯æŒ
- ğŸ“§ **Resend** - é‚®ä»¶æœåŠ¡é›†æˆ
- ğŸŒ **å›½é™…åŒ–** - ä¸­è‹±æ–‡åŒè¯­æ”¯æŒ
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…ç§»åŠ¨ç«¯
- ğŸ¯ **SEOä¼˜åŒ–** - æœç´¢å¼•æ“å‹å¥½
- ğŸ”’ **TypeScript** - ç±»å‹å®‰å…¨ä¿éšœ

### ğŸ“‹ åŠŸèƒ½æ¨¡å—

#### ç”¨æˆ·ç«¯åŠŸèƒ½
- **é¦–é¡µ** - å±•ç¤ºçƒ­é—¨èµ„æºå’Œå¹³å°æ¦‚è§ˆ
- **èµ„æºåº“** - æµè§ˆã€æœç´¢ã€ç­›é€‰èµ„æº
- **èµ„æºè¯¦æƒ…** - æŸ¥çœ‹èµ„æºè¯¦ç»†ä¿¡æ¯ã€ä¸‹è½½ã€è¯„ä»·
- **åˆ†ç±»é¡µé¢** - æŒ‰åˆ†ç±»æµè§ˆèµ„æº
- **æ ‡ç­¾é¡µé¢** - æ ‡ç­¾äº‘å’Œæ ‡ç­¾ç­›é€‰
- **ä¸Šä¼ é¡µé¢** - ä¸Šä¼ å’Œå‘å¸ƒèµ„æº
- **ç”¨æˆ·ä¸­å¿ƒ** - ä¸ªäººä¿¡æ¯ã€æˆ‘çš„ä¸Šä¼ ã€æˆ‘çš„æ”¶è—
- **è®¢å•ç®¡ç†** - ä»˜è´¹èµ„æºè®¢å•ç®¡ç†
- **ç§¯åˆ†ç³»ç»Ÿ** - ç”¨æˆ·ç§¯åˆ†å’Œé‚€è¯·å¥–åŠ±

#### ç®¡ç†åå°
- **èµ„æºç®¡ç†** - èµ„æºå®¡æ ¸ã€ç¼–è¾‘ã€åˆ é™¤
- **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- **åˆ†ç±»ç®¡ç†** - åˆ†ç±»å±‚çº§ç®¡ç†
- **æ ‡ç­¾ç®¡ç†** - æ ‡ç­¾åˆ›å»ºå’Œç®¡ç†
- **è®¢å•ç®¡ç†** - ä»˜è´¹è®¢å•å¤„ç†
- **å†…å®¹ç®¡ç†** - æ–‡ç« å’Œé¡µé¢ç®¡ç†
- **é‚®ä»¶ç®¡ç†** - é‚®ä»¶æœåŠ¡é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn
- SQLite (å¼€å‘ç¯å¢ƒ) æˆ– PostgreSQL (ç”Ÿäº§ç¯å¢ƒ)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd civilization-resources-platform
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
# æˆ–
yarn install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="file:./dev.db"

# NextAuth é…ç½®
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"

# å­˜å‚¨æœåŠ¡é…ç½® (R2/S3)
STORAGE_ENDPOINT="your-storage-endpoint"
STORAGE_ACCESS_KEY="your-access-key"
STORAGE_SECRET_KEY="your-secret-key"
STORAGE_BUCKET="your-bucket-name"

# é‚®ä»¶æœåŠ¡é…ç½®
RESEND_API_KEY="your-resend-api-key"

# ç®¡ç†å‘˜é‚®ç®±
ADMIN_EMAILS="admin@example.com"
```

4. **æ•°æ®åº“åˆå§‹åŒ–**
```bash
npm run db:push
# æˆ–
yarn db:push
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
# æˆ–
yarn dev
```

6. **è®¿é—®åº”ç”¨**
æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## ğŸ“ é¡¹ç›®ç»“æ„

```
civilization-resources-platform/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ [locale]/                 # å›½é™…åŒ–è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ (admin)/             # ç®¡ç†åå°
â”‚   â”‚   â”œâ”€â”€ (auth)/              # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (default)/           # ä¸»è¦é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ resources/       # èµ„æºç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/      # åˆ†ç±»é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ tags/           # æ ‡ç­¾é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ upload/         # ä¸Šä¼ é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ my-*/           # ç”¨æˆ·ä¸­å¿ƒé¡µé¢
â”‚   â”‚   â””â”€â”€ api/                # API è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ resources/      # èµ„æº API
â”‚   â”‚       â”œâ”€â”€ categories/     # åˆ†ç±» API
â”‚   â”‚       â”œâ”€â”€ tags/          # æ ‡ç­¾ API
â”‚   â”‚       â”œâ”€â”€ favorites/     # æ”¶è— API
â”‚   â”‚       â””â”€â”€ ratings/       # è¯„åˆ† API
â”œâ”€â”€ components/                  # React ç»„ä»¶
â”‚   â”œâ”€â”€ blocks/                 # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/              # åå°ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                 # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ ui/                     # åŸºç¡€ UI ç»„ä»¶
â”œâ”€â”€ lib/                        # å·¥å…·åº“
â”œâ”€â”€ models/                     # æ•°æ®æ¨¡å‹
â”œâ”€â”€ types/                      # TypeScript ç±»å‹
â”œâ”€â”€ i18n/                       # å›½é™…åŒ–é…ç½®
â””â”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®

é¡¹ç›®æ”¯æŒ SQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰å’Œ PostgreSQLï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š

```env
# SQLite (å¼€å‘ç¯å¢ƒ)
DATABASE_URL="file:./dev.db"

# PostgreSQL (ç”Ÿäº§ç¯å¢ƒ)
DATABASE_URL="postgresql://username:password@localhost:5432/dbname"
```

### å­˜å‚¨æœåŠ¡é…ç½®

æ”¯æŒ Cloudflare R2 æˆ– AWS S3 å…¼å®¹çš„å­˜å‚¨æœåŠ¡ï¼š

```env
STORAGE_ENDPOINT="https://your-account-id.r2.cloudflarestorage.com"
STORAGE_ACCESS_KEY="your-access-key"
STORAGE_SECRET_KEY="your-secret-key"
STORAGE_BUCKET="your-bucket-name"
```

### é‚®ä»¶æœåŠ¡é…ç½®

ä½¿ç”¨ Resend ä½œä¸ºé‚®ä»¶æœåŠ¡æä¾›å•†ï¼š

```env
RESEND_API_KEY="re_your_api_key"
```

## ğŸ“š API æ–‡æ¡£

### èµ„æºç›¸å…³ API

#### è·å–èµ„æºåˆ—è¡¨
```http
GET /api/resources?category=1&tags=design&search=ui&sort=latest&limit=20&offset=0
```

#### è·å–èµ„æºè¯¦æƒ…
```http
GET /api/resources/{uuid}
```

#### ä¸Šä¼ èµ„æº
```http
POST /api/resources
Content-Type: application/json

{
  "title": "èµ„æºæ ‡é¢˜",
  "description": "èµ„æºæè¿°",
  "file_url": "https://example.com/resource",
  "category_id": 1,
  "tags": ["tag1", "tag2"],
  "is_free": true,
  "credits": 0
}
```

### ç”¨æˆ·äº¤äº’ API

#### æ”¶è—èµ„æº
```http
POST /api/favorites
Content-Type: application/json

{
  "resource_id": 1
}
```

#### è¯„åˆ†èµ„æº
```http
POST /api/ratings
Content-Type: application/json

{
  "resource_id": 1,
  "rating": 5
}
```

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ [API æ–‡æ¡£](docs/api.md)

## ğŸ¨ ä¸»é¢˜å®šåˆ¶

é¡¹ç›®ä½¿ç”¨ Tailwind CSSï¼Œæ”¯æŒæ·±åº¦å®šåˆ¶ï¼š

1. **é¢œè‰²ä¸»é¢˜** - ä¿®æ”¹ `tailwind.config.js` ä¸­çš„é¢œè‰²é…ç½®
2. **ç»„ä»¶æ ·å¼** - åœ¨ `components/ui/` ä¸­è‡ªå®šä¹‰åŸºç¡€ç»„ä»¶
3. **å¸ƒå±€æ ·å¼** - åœ¨ `components/layout/` ä¸­è°ƒæ•´å¸ƒå±€ç»„ä»¶

## ğŸŒ å›½é™…åŒ–

é¡¹ç›®æ”¯æŒä¸­è‹±æ–‡åŒè¯­ï¼š

1. **æ·»åŠ ç¿»è¯‘** - åœ¨ `i18n/messages/` ä¸­æ·»åŠ ç¿»è¯‘æ–‡ä»¶
2. **ä½¿ç”¨ç¿»è¯‘** - ä½¿ç”¨ `useTranslations()` Hook
3. **è¯­è¨€åˆ‡æ¢** - é€šè¿‡ URL è·¯å¾„åˆ‡æ¢è¯­è¨€ (`/zh/` æˆ– `/en/`)

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

- **å“åº”å¼è®¾è®¡** - æ‰€æœ‰é¡µé¢å®Œç¾é€‚é…ç§»åŠ¨ç«¯
- **è§¦æ‘¸å‹å¥½** - ä¼˜åŒ–çš„è§¦æ‘¸äº¤äº’ä½“éªŒ
- **ç§»åŠ¨ç«¯å¯¼èˆª** - ä¸“é—¨çš„ç§»åŠ¨ç«¯å¯¼èˆªç»„ä»¶
- **æ€§èƒ½ä¼˜åŒ–** - å›¾ç‰‡æ‡’åŠ è½½å’Œç¼“å­˜ç­–ç•¥

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. è¿æ¥ GitHub ä»“åº“åˆ° Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²

### è‡ªæ‰˜ç®¡éƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
```bash
npm start
```

3. **ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹**
```bash
pm2 start npm --name "resources-platform" -- start
```

### Docker éƒ¨ç½²

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

## ğŸ”’ å®‰å…¨æ€§

- **æ–‡ä»¶ä¸Šä¼ å®‰å…¨** - æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„è¾“å…¥å‚æ•°éªŒè¯
- **SQL æ³¨å…¥é˜²æŠ¤** - ä½¿ç”¨ Prisma ORM
- **XSS é˜²æŠ¤** - è¾“å‡ºè½¬ä¹‰å’Œ CSP å¤´

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼š

```bash
# å•å…ƒæµ‹è¯•
npm run test

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å›¾ç‰‡ä¼˜åŒ–** - Next.js Image ç»„ä»¶å’Œæ‡’åŠ è½½
- **ä»£ç åˆ†å‰²** - è‡ªåŠ¨çš„è·¯ç”±çº§ä»£ç åˆ†å‰²
- **ç¼“å­˜ç­–ç•¥** - å¤šå±‚ç¼“å­˜æœºåˆ¶
- **CDN é›†æˆ** - é™æ€èµ„æº CDN åŠ é€Ÿ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](docs/faq.md)
2. æœç´¢ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ Issue
4. è”ç³»ç»´æŠ¤è€…

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**æ–‡æ˜èµ„æºç«™** - è®©èµ„æºåˆ†äº«æ›´ç®€å• ğŸš€